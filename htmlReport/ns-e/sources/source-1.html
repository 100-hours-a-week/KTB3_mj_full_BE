


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"> 
  <title>Coverage Report > UserController</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.example.restapi_demo.user.controller</a>
</div>

<h1>Coverage Summary for Class: UserController (com.example.restapi_demo.user.controller)</h1>

<table class="coverageStats">

<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Branch, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">UserController</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/12)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/44)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/114)
  </span>
</td>
</tr>
  <tr>
    <td class="name">UserController$SignupBody</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/1)
  </span>
</td>
  </tr>
<tr>
  <td class="name"><strong>Total</strong></td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/13)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/44)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    0%
  </span>
  <span class="absValue">
    (0/115)
  </span>
</td>
</tr>
</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.example.restapi_demo.user.controller;
&nbsp;
&nbsp;import com.example.restapi_demo.common.api.ApiResponse;
&nbsp;import com.example.restapi_demo.user.dto.FieldErrorDTO;
&nbsp;import com.example.restapi_demo.user.dto.PasswordChangeRequest;
&nbsp;import com.example.restapi_demo.user.dto.UpdateUserRequest;
&nbsp;import com.example.restapi_demo.user.model.User;
&nbsp;import com.example.restapi_demo.user.service.UserService;
&nbsp;import io.swagger.v3.oas.annotations.Operation;
&nbsp;import io.swagger.v3.oas.annotations.Parameter;
&nbsp;import io.swagger.v3.oas.annotations.media.ArraySchema;
&nbsp;import io.swagger.v3.oas.annotations.media.Content;
&nbsp;import io.swagger.v3.oas.annotations.media.Schema;
&nbsp;import org.springframework.http.*;
&nbsp;import org.springframework.security.core.Authentication;
&nbsp;import org.springframework.security.core.context.SecurityContextHolder;
&nbsp;import org.springframework.security.core.userdetails.UserDetails;
&nbsp;import org.springframework.transaction.annotation.Transactional;
&nbsp;import org.springframework.web.bind.annotation.*;
&nbsp;
&nbsp;import java.time.LocalDateTime;
&nbsp;import java.util.*;
&nbsp;
&nbsp;@RestController
&nbsp;@RequestMapping(&quot;/api/users&quot;)
&nbsp;public class UserController {
&nbsp;
&nbsp;    private final UserService userService;
<b class="nc">&nbsp;    public UserController(UserService userService) {</b>
<b class="nc">&nbsp;        this.userService = userService;</b>
&nbsp;    }
&nbsp;
&nbsp;    private String currentEmailOrNull() {
<b class="nc">&nbsp;        Authentication auth = SecurityContextHolder.getContext().getAuthentication();</b>
<b class="nc">&nbsp;        if (auth == null || !auth.isAuthenticated()) return null;</b>
&nbsp;
<b class="nc">&nbsp;        Object principal = auth.getPrincipal();</b>
<b class="nc">&nbsp;        if (principal == null) return null;</b>
<b class="nc">&nbsp;        if (&quot;anonymousUser&quot;.equals(principal)) return null;</b>
&nbsp;
<b class="nc">&nbsp;        if (principal instanceof UserDetails userDetails) {</b>
<b class="nc">&nbsp;            return userDetails.getUsername();</b>
&nbsp;        }
<b class="nc">&nbsp;        return principal.toString();</b>
&nbsp;    }
&nbsp;
&nbsp;    private User currentUserOrNull() {
<b class="nc">&nbsp;        String email = currentEmailOrNull();</b>
<b class="nc">&nbsp;        if (email == null || email.isBlank()) return null;</b>
<b class="nc">&nbsp;        return userService.findByEmail(email);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;회원가입&quot;,
&nbsp;            description = &quot;이메일/비밀번호/닉네임으로 회원을 등록합니다. 성공 시 data에 user_id 반환.&quot;
&nbsp;    )
&nbsp;    @io.swagger.v3.oas.annotations.responses.ApiResponses({
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;201&quot;, description = &quot;register_success&quot;),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;400&quot;, description = &quot;invalid_request&quot;),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;500&quot;, description = &quot;internal_server_error&quot;)
&nbsp;    })
&nbsp;    @PostMapping(&quot;/signup&quot;)
&nbsp;    public ResponseEntity&lt;ApiResponse&lt;Object&gt;&gt; signup(
&nbsp;            @io.swagger.v3.oas.annotations.parameters.RequestBody(
&nbsp;                    required = true,
&nbsp;                    description = &quot;회원가입 요청 바디&quot;,
&nbsp;                    content = @Content(schema = @Schema(implementation = SignupBody.class))
&nbsp;            )
&nbsp;            @RequestBody Map&lt;String, String&gt; req
&nbsp;    ) {
&nbsp;        try {
<b class="nc">&nbsp;            String email            = req.get(&quot;email&quot;);</b>
<b class="nc">&nbsp;            String password         = req.get(&quot;password&quot;);</b>
<b class="nc">&nbsp;            String passwordConfirm  = req.get(&quot;password_confirm&quot;);</b>
<b class="nc">&nbsp;            String nickname         = req.get(&quot;nickname&quot;);</b>
<b class="nc">&nbsp;            String profileImageUrl  = req.get(&quot;profile_image&quot;);</b>
&nbsp;
<b class="nc">&nbsp;            User user = userService.register(email, password, passwordConfirm, nickname, profileImageUrl);</b>
<b class="nc">&nbsp;            if (user == null) {</b>
<b class="nc">&nbsp;                return ResponseEntity.status(HttpStatus.BAD_REQUEST)</b>
<b class="nc">&nbsp;                        .body(new ApiResponse&lt;&gt;(&quot;invalid_request&quot;, null));</b>
&nbsp;            }
<b class="nc">&nbsp;            return ResponseEntity.status(HttpStatus.CREATED)</b>
<b class="nc">&nbsp;                    .body(new ApiResponse&lt;&gt;(&quot;register_success&quot;, Map.of(&quot;user_id&quot;, user.getId())));</b>
&nbsp;        } catch (Exception e) {
<b class="nc">&nbsp;            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)</b>
<b class="nc">&nbsp;                    .body(new ApiResponse&lt;&gt;(&quot;internal_server_error&quot;, null));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Operation(summary = &quot;내 정보 조회&quot;, description = &quot;현재 로그인 사용자의 정보를 조회합니다.&quot;)
&nbsp;    @io.swagger.v3.oas.annotations.responses.ApiResponses({
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;200&quot;, description = &quot;read_success&quot;),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;401&quot;, description = &quot;auth_required&quot;),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;404&quot;, description = &quot;user_not_found&quot;),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;500&quot;, description = &quot;internal_server_error&quot;)
&nbsp;    })
&nbsp;    @GetMapping(&quot;/me&quot;)
&nbsp;    @Transactional(readOnly = true)
&nbsp;    public ResponseEntity&lt;ApiResponse&lt;Object&gt;&gt; me() {
&nbsp;        try {
<b class="nc">&nbsp;            User u = currentUserOrNull();</b>
<b class="nc">&nbsp;            if (u == null) {</b>
<b class="nc">&nbsp;                return ResponseEntity.status(HttpStatus.UNAUTHORIZED)</b>
<b class="nc">&nbsp;                        .body(new ApiResponse&lt;&gt;(&quot;auth_required&quot;, null));</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            Map&lt;String, Object&gt; data = new HashMap&lt;&gt;();</b>
<b class="nc">&nbsp;            data.put(&quot;id&quot;, u.getId());</b>
<b class="nc">&nbsp;            data.put(&quot;email&quot;, u.getEmail());</b>
<b class="nc">&nbsp;            data.put(&quot;nickname&quot;, u.getNickname());</b>
<b class="nc">&nbsp;            data.put(&quot;profile_image&quot;, u.getProfileImageUrl() != null ? u.getProfileImageUrl() : &quot;&quot;);</b>
&nbsp;
<b class="nc">&nbsp;            return ResponseEntity.ok(new ApiResponse&lt;&gt;(&quot;read_success&quot;, data));</b>
&nbsp;        } catch (Exception e) {
<b class="nc">&nbsp;            e.printStackTrace();</b>
<b class="nc">&nbsp;            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)</b>
<b class="nc">&nbsp;                    .body(new ApiResponse&lt;&gt;(&quot;internal_server_error&quot;, null));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Operation(summary = &quot;내 정보 수정&quot;, description = &quot;닉네임(필수, 최대 20자)과 프로필 이미지(선택)를 수정합니다.&quot;)
&nbsp;    @io.swagger.v3.oas.annotations.responses.ApiResponses({
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;200&quot;, description = &quot;update_success&quot;),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(
&nbsp;                    responseCode = &quot;400&quot;,
&nbsp;                    description = &quot;invalid_request&quot;,
&nbsp;                    content = @Content(array = @ArraySchema(schema = @Schema(implementation = FieldErrorDTO.class)))
&nbsp;            ),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;401&quot;, description = &quot;auth_required&quot;),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;404&quot;, description = &quot;user_not_found&quot;),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;500&quot;, description = &quot;internal_server_error&quot;)
&nbsp;    })
&nbsp;    @PatchMapping(&quot;/me&quot;)
&nbsp;    public ResponseEntity&lt;ApiResponse&lt;Object&gt;&gt; updateMe(
&nbsp;            @io.swagger.v3.oas.annotations.parameters.RequestBody(
&nbsp;                    required = true,
&nbsp;                    content = @Content(schema = @Schema(implementation = UpdateUserRequest.class))
&nbsp;            )
&nbsp;            @RequestBody UpdateUserRequest req
&nbsp;    ) {
&nbsp;        try {
<b class="nc">&nbsp;            User exist = currentUserOrNull();</b>
<b class="nc">&nbsp;            if (exist == null) {</b>
<b class="nc">&nbsp;                return ResponseEntity.status(HttpStatus.UNAUTHORIZED)</b>
<b class="nc">&nbsp;                        .body(new ApiResponse&lt;&gt;(&quot;auth_required&quot;, null));</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            List&lt;FieldErrorDTO&gt; errors = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;            String nickname = req.getNickname();</b>
<b class="nc">&nbsp;            String profileImageUrl = req.getProfile_image();</b>
&nbsp;
<b class="nc">&nbsp;            if (nickname == null || nickname.isBlank()) {</b>
<b class="nc">&nbsp;                errors.add(new FieldErrorDTO(&quot;nickname&quot;, &quot;blank&quot;));</b>
<b class="nc">&nbsp;            } else if (nickname.length() &gt; 20) {</b>
<b class="nc">&nbsp;                errors.add(new FieldErrorDTO(&quot;nickname&quot;, &quot;too_long&quot;));</b>
&nbsp;            }
<b class="nc">&nbsp;            if (!errors.isEmpty()) {</b>
<b class="nc">&nbsp;                return ResponseEntity.badRequest()</b>
<b class="nc">&nbsp;                        .body(new ApiResponse&lt;&gt;(&quot;invalid_request&quot;, errors));</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            User updated = userService.updateProfile(exist.getId(), nickname, profileImageUrl);</b>
<b class="nc">&nbsp;            if (updated == null) {</b>
<b class="nc">&nbsp;                return ResponseEntity.status(HttpStatus.NOT_FOUND)</b>
<b class="nc">&nbsp;                        .body(new ApiResponse&lt;&gt;(&quot;user_not_found&quot;, null));</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            Map&lt;String, Object&gt; data = new HashMap&lt;&gt;();</b>
<b class="nc">&nbsp;            data.put(&quot;id&quot;, updated.getId());</b>
<b class="nc">&nbsp;            data.put(&quot;nickname&quot;, updated.getNickname());</b>
<b class="nc">&nbsp;            data.put(&quot;profile_image&quot;, updated.getProfileImageUrl());</b>
<b class="nc">&nbsp;            data.put(&quot;updated_at&quot;, LocalDateTime.now());</b>
&nbsp;
<b class="nc">&nbsp;            return ResponseEntity.ok(new ApiResponse&lt;&gt;(&quot;update_success&quot;, data));</b>
&nbsp;        } catch (Exception e) {
<b class="nc">&nbsp;            e.printStackTrace();</b>
<b class="nc">&nbsp;            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)</b>
<b class="nc">&nbsp;                    .body(new ApiResponse&lt;&gt;(&quot;internal_server_error&quot;, null));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Operation(summary = &quot;회원 탈퇴&quot;, description = &quot;성공 시 204(No Content) 반환.&quot;)
&nbsp;    @io.swagger.v3.oas.annotations.responses.ApiResponses({
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;204&quot;, description = &quot;delete_success&quot;),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;401&quot;, description = &quot;auth_required&quot;),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;404&quot;, description = &quot;user_not_found&quot;),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;500&quot;, description = &quot;internal_server_error&quot;)
&nbsp;    })
&nbsp;    @DeleteMapping(&quot;/me&quot;)
&nbsp;    public ResponseEntity&lt;ApiResponse&lt;Object&gt;&gt; deleteMe() {
&nbsp;        try {
<b class="nc">&nbsp;            User exist = currentUserOrNull();</b>
<b class="nc">&nbsp;            if (exist == null) {</b>
<b class="nc">&nbsp;                return ResponseEntity.status(HttpStatus.UNAUTHORIZED)</b>
<b class="nc">&nbsp;                        .body(new ApiResponse&lt;&gt;(&quot;auth_required&quot;, null));</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            boolean deleted = userService.deleteMe(exist.getId());</b>
<b class="nc">&nbsp;            if (!deleted) {</b>
<b class="nc">&nbsp;                return ResponseEntity.status(HttpStatus.NOT_FOUND)</b>
<b class="nc">&nbsp;                        .body(new ApiResponse&lt;&gt;(&quot;user_not_found&quot;, null));</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return ResponseEntity.status(HttpStatus.NO_CONTENT)</b>
<b class="nc">&nbsp;                    .body(new ApiResponse&lt;&gt;(&quot;delete_success&quot;, null));</b>
&nbsp;        } catch (Exception e) {
<b class="nc">&nbsp;            e.printStackTrace();</b>
<b class="nc">&nbsp;            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)</b>
<b class="nc">&nbsp;                    .body(new ApiResponse&lt;&gt;(&quot;internal_server_error&quot;, null));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;비밀번호 변경&quot;,
&nbsp;            description = &quot;8~20자, 대/소문자/숫자/특수문자 각 1개 이상 포함하는 새 비밀번호로 변경합니다.&quot;
&nbsp;    )
&nbsp;    @io.swagger.v3.oas.annotations.responses.ApiResponses({
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;200&quot;, description = &quot;password_changed&quot;),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(
&nbsp;                    responseCode = &quot;400&quot;, description = &quot;invalid_request&quot;,
&nbsp;                    content = @Content(array = @ArraySchema(schema = @Schema(implementation = FieldErrorDTO.class)))
&nbsp;            ),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;401&quot;, description = &quot;auth_required&quot;),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;404&quot;, description = &quot;user_not_found&quot;),
&nbsp;            @io.swagger.v3.oas.annotations.responses.ApiResponse(responseCode = &quot;500&quot;, description = &quot;internal_server_error&quot;)
&nbsp;    })
&nbsp;    @PatchMapping(&quot;/me/password&quot;)
&nbsp;    public ResponseEntity&lt;ApiResponse&lt;Object&gt;&gt; changePassword(
&nbsp;            @io.swagger.v3.oas.annotations.parameters.RequestBody(
&nbsp;                    required = true,
&nbsp;                    content = @Content(schema = @Schema(implementation = PasswordChangeRequest.class))
&nbsp;            )
&nbsp;            @RequestBody PasswordChangeRequest req
&nbsp;    ) {
&nbsp;        try {
<b class="nc">&nbsp;            User exist = currentUserOrNull();</b>
<b class="nc">&nbsp;            if (exist == null) {</b>
<b class="nc">&nbsp;                return ResponseEntity.status(HttpStatus.UNAUTHORIZED)</b>
<b class="nc">&nbsp;                        .body(new ApiResponse&lt;&gt;(&quot;auth_required&quot;, null));</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            var result = userService.changePassword(exist.getId(), req.getNew_password(), req.getNew_password_confirm());</b>
<b class="nc">&nbsp;            if (result == null) {</b>
<b class="nc">&nbsp;                return ResponseEntity.status(HttpStatus.NOT_FOUND)</b>
<b class="nc">&nbsp;                        .body(new ApiResponse&lt;&gt;(&quot;user_not_found&quot;, null));</b>
&nbsp;            }
<b class="nc">&nbsp;            if (!result.success) {</b>
<b class="nc">&nbsp;                List&lt;FieldErrorDTO&gt; errors = new ArrayList&lt;&gt;();</b>
<b class="nc">&nbsp;                for (String[] e : result.errors) errors.add(new FieldErrorDTO(e[0], e[1]));</b>
<b class="nc">&nbsp;                return ResponseEntity.badRequest()</b>
<b class="nc">&nbsp;                        .body(new ApiResponse&lt;&gt;(&quot;invalid_request&quot;, errors));</b>
&nbsp;            }
&nbsp;
<b class="nc">&nbsp;            return ResponseEntity.ok(new ApiResponse&lt;&gt;(&quot;password_changed&quot;, null));</b>
&nbsp;        } catch (Exception e) {
<b class="nc">&nbsp;            e.printStackTrace();</b>
<b class="nc">&nbsp;            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)</b>
<b class="nc">&nbsp;                    .body(new ApiResponse&lt;&gt;(&quot;internal_server_error&quot;, null));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @GetMapping(&quot;/search/nickname&quot;)
&nbsp;    @Transactional(readOnly = true)
&nbsp;    public ResponseEntity&lt;ApiResponse&lt;Object&gt;&gt; searchByNickname(
&nbsp;            @Parameter(description = &quot;검색 키워드&quot;, example = &quot;test&quot;)
&nbsp;            @RequestParam String keyword
&nbsp;    ) {
&nbsp;        try {
<b class="nc">&nbsp;            var users = userService.findByNicknameKeyword(keyword);</b>
<b class="nc">&nbsp;            var data = users.stream().map(u -&gt; Map.of(</b>
<b class="nc">&nbsp;                    &quot;id&quot;, u.getId(),</b>
<b class="nc">&nbsp;                    &quot;email&quot;, u.getEmail(),</b>
<b class="nc">&nbsp;                    &quot;nickname&quot;, u.getNickname(),</b>
<b class="nc">&nbsp;                    &quot;profile_image&quot;, u.getProfileImageUrl()</b>
<b class="nc">&nbsp;            )).toList();</b>
<b class="nc">&nbsp;            return ResponseEntity.ok(new ApiResponse&lt;&gt;(&quot;search_success&quot;, data));</b>
&nbsp;        } catch (Exception e) {
<b class="nc">&nbsp;            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)</b>
<b class="nc">&nbsp;                    .body(new ApiResponse&lt;&gt;(&quot;internal_server_error&quot;, null));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @GetMapping(&quot;/exists/email&quot;)
&nbsp;    @Transactional(readOnly = true)
&nbsp;    public ResponseEntity&lt;ApiResponse&lt;Object&gt;&gt; existsByEmail(
&nbsp;            @Parameter(description = &quot;확인할 이메일&quot;, example = &quot;test@example.com&quot;)
&nbsp;            @RequestParam String email
&nbsp;    ) {
&nbsp;        try {
<b class="nc">&nbsp;            boolean exists = userService.existsByEmail(email);</b>
<b class="nc">&nbsp;            return ResponseEntity.ok(new ApiResponse&lt;&gt;(&quot;check_success&quot;, Map.of(&quot;exists&quot;, exists)));</b>
&nbsp;        } catch (Exception e) {
<b class="nc">&nbsp;            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)</b>
<b class="nc">&nbsp;                    .body(new ApiResponse&lt;&gt;(&quot;internal_server_error&quot;, null));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @GetMapping(&quot;/count/nickname&quot;)
&nbsp;    @Transactional(readOnly = true)
&nbsp;    public ResponseEntity&lt;ApiResponse&lt;Object&gt;&gt; countByNickname(
&nbsp;            @Parameter(description = &quot;조회할 닉네임&quot;, example = &quot;startup&quot;)
&nbsp;            @RequestParam String nickname
&nbsp;    ) {
&nbsp;        try {
<b class="nc">&nbsp;            long count = userService.countByNickname(nickname);</b>
<b class="nc">&nbsp;            return ResponseEntity.ok(new ApiResponse&lt;&gt;(&quot;count_success&quot;, Map.of(&quot;count&quot;, count)));</b>
&nbsp;        } catch (Exception e) {
<b class="nc">&nbsp;            return ResponseEntity.status(HttpStatus.INTERNAL_SERVER_ERROR)</b>
<b class="nc">&nbsp;                    .body(new ApiResponse&lt;&gt;(&quot;internal_server_error&quot;, null));</b>
&nbsp;        }
&nbsp;    }
&nbsp;
&nbsp;    @Schema(description = &quot;회원가입 요청 바디(문서용)&quot;)
<b class="nc">&nbsp;    static class SignupBody {</b>
&nbsp;        @Schema(description = &quot;이메일&quot;, example = &quot;test@startupcode.kr&quot;)
&nbsp;        public String email;
&nbsp;        @Schema(description = &quot;비밀번호&quot;, example = &quot;Abcd1234!&quot;)
&nbsp;        public String password;
&nbsp;        @Schema(description = &quot;비밀번호 확인&quot;, example = &quot;Abcd1234!&quot;)
&nbsp;        public String password_confirm;
&nbsp;        @Schema(description = &quot;닉네임&quot;, example = &quot;startup&quot;)
&nbsp;        public String nickname;
&nbsp;        @Schema(description = &quot;프로필 이미지 URL&quot;, example = &quot;https://cdn.example.com/avatar.jpg&quot;)
&nbsp;        public String profile_image;
&nbsp;    }
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2025-12-02 20:57</div>
</div>
</body>
</html>
